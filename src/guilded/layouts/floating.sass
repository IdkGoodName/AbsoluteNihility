@use "../../base"
@use "../../set"
@use "../../borders"

/*
 * --==========================--
 *    Floating boxes and menus
 * --==========================--
 */

/*
 * -=- New messages / Alert bar -=-
 */

// Alert bar icon
.ChatChannelAlertBar-icon
    fill: base.$fg-2

// Any alert bar
.ChatChannelAlertBar-container
    @include set.color(base.$fg-2)
    background-color: base.$bg-0 !important
    border-color: base.$border-dark-0
    // Hover
    &::after
        background-color: base.$bg-hover
    
    // Viewing older messages
    &-type-viewing-older-messages,
    // Unread messages
    &-type-unread-messages,
    // New messages
    &-type-new-messages,
    &-type-new-replies,
    // New mentions
    &-type-new-mentions
        background-color: base.$bg-0 !important
    
    // New mentions and new forum replies
    &-type-new-replies,
    &-type-new-mentions
        color: base.$mention !important
        fill: base.$mention !important
        // New mentions icon
        .ChatChannelAlertBar-icon-click-wrapper .ChatChannelAlertBar-icon
            fill: base.$mention
    
    // Unread messages
    &-type-unread-messages
        color: base.$active !important
        fill: base.$active !important
        // Unread messages icon
        .ChatChannelAlertBar-icon-click-wrapper .ChatChannelAlertBar-icon
            fill: base.$active

/*
 * -=- Tooltips -=-
 */

// Tooltip
.HoverContextTooltip
    // Base
    &-text-wrapper
        background-color: base.$bg-1
        border: solid 2px
            color: base.$border-dark-1
        opacity: base.$floating-opacity
    // Arrow/Pointer
    &-arrow
        background-color: base.$bg-0

// Keybinds
.Glyph-container
    background-color: base.$bg-5
    color: base.$fg-2

/*
 * -=- Reactions -=-
 */

// Reaction normally
.ReactionPickerButton-container-type-content,
.ReactionBadge-container-content
    @extend %ContentMildlyBordered-3
// Reaction hovered
.ReactionBadge-container-content:hover,
.ReactionBadge-container:not(.ReactionBadge-container-disabled):not(.ReactionBadge-container-active):hover .ReactionBadge-container-content
    @extend %ContentBordered-4

.ReactionPickerButton-container-type-content
    transition-duration: base.$transition

    // When reaction is hovered over
    &:hover
        background-color: base.$bg-0

// Text after the reaction button
.ReactionPickerButton-container-with-label::after
    color: base.$fg-1
    transition-duration: base.$transition

// Reaction icon
.ReactionPickerButton
    // Normally
    &-container &-icon
        color: base.$fg-2
        fill: base.$fg-2
        transition-duration: base.$transition
    // Hover
    &-container:hover &-icon
        color: base.$fg-3
        fill: base.$fg-3
// Reaction counter
.ReactionBadge-container
    &:not(&-disabled):hover .ReactionBadge-count
        color: base.$fg-3
    // Active
    &.ReactionBadge-container-active
        // Normal active reaction
        .ReactionBadge-container-content
            background-color: mix(base.$bg-1, base.$active, 90%)
            border-color: rgba(base.$active, 0.1)
            // Active reaction label
            .ReactionBadge-count
                color: base.$active
        // Active reaction hover
        &.ReactionBadge-container:not(.ReactionBadge-container-disabled):hover .ReactionBadge-container-content
            background-color: mix(base.$bg-1, base.$active, 95%)

/*
 * -=- Team cards -=-
 */

// Role card's background
.TeamRoleCardOverlay-container,
// Profile card's background
.ProfileHoverCardV2Overlay-container
    background-color: base.$bg-5

// Section's header
.UserAttributionDisplay-header,
.UserTeamXpDisplay-level-display .GuildedText-container // Level
    color: base.$fg-3

// Total XP needed
.UserTeamXpDisplay-level-display .GuildedText-container.GuildedText-container-type-subtext2
    color: base.$fg-1
    // XP user has
    .GuildedText-container-weight-bold
        color: base.$fg-2

// Socials
.OverviewWidgetItem
    // Icon
    &-icon
        fill: base.$fg-1
    // Text
    &-text, &-input
        color: base.$fg-2

// Background for buttons
.TeamRoleCardOverlay-menu,
.ProfileHoverCardV2Overlay-action-menu
    background-color: base.$bg-3

/*
 * -=- Mention icons and notifications -=-
 */

// Mentions
.BadgeV2-container,
.NavIcon-dot
    background-color: base.$mention

// Notifications
.NavSelectorItem-container-orientation-horizontal.NavSelectorItem-container-unread,
.NavSelectorItem-container-orientation-vertical.NavSelectorItem-container-unread,
.ChannelActivityItem-container.ChannelActivityItem-container-unread,
.NavV4BadgedItem-container-unread .NavV4BadgedItem-icon-wrapper,
.TeamOverviewContentItemCard-container-unread,
.TeamChannelItemContents-container-unread,
.TeamAnnouncementItem-container-unread,
.NavV4SelectorRow-container-unread,
.TeamPostRow-container-unread,
.NavV4ItemIcon-icon-unread
    &::before
        background-color: base.$mark

/*
 * --- Menu ---
 */

// Menu container
.TransientMenu-container-style-default
    background-color: base.$bg-1
    border-color: base.$border-light-2

// Plus menu
.ContextMenuItem-container
    &-section-type-rows
        // Description
        .ContextMenuItem-body
            color: base.$fg-1
    &:hover
        // Description
        .ContextMenuItem-body
            color: base.$fg-2
// Button
.ContextMenu
    // Icon
    &-content
        fill: base.$fg-1
    // Text
    &Item-label
        color: base.$fg-2
// Menu item
.ContextMenuItem
    &-container
        color: base.$fg-2
        fill: base.$fg-2
        // Text and icon on hover
        &:hover
            // Text
            .ContextMenuItem-label
                color: base.$fg-3
            // Icon
            .ContextMenuIcon-container-icon
                fill: base.$fg-3
        // Menu item hover glare
        &::after
            background-color: base.$bg-hover
    // Menu item download app highlighted
    &-highlighted
        background-color: transparent
        fill: base.$important
        // Text
        .ContextMenuItem-label
            color: base.$important
        // Icon
        .ContextMenuIcon-container-icon
            color: base.$important

// Highlighted
.ContextMenuItem-container.ContextMenuItem-highlighted
    .ContextMenuItem-icon, .ContextMenuItem-label
        color: base.$highlight
        fill: base.$highlight

// Overflow icon
.ContextMenuTrigger
    &-container &-icon
        fill: base.$fg-1
        @include set.transition(fill)
    &-container-desktop:hover &-icon
        fill: base.$fg-2

/*
 * --- Emote picker ---
 */

// Emote picker
.ReactionPicker
    // Emote picker content
    &-content
        background-color: base.$bg-3
    // Emote icon
    &Icon-container:hover, &Icon-container:focus
        background-color: base.$bg-1
    
    // Bottom bar
    &Footer-container,
    // Top bar
    &Navbar-container
        color: base.$fg-2
        @extend %PanelBordered-3

    // Emote name
    &-section-label
        color: base.$fg-3
    // Emote server title
    &Preview-team
        color: base.$fg-1
    // Emote picker tab's icon
    &NavbarItem-icon
        fill: base.$fg-1
        .ReactionPickerNavbarItem:hover &
            fill: base.$fg-2
        .ReactionPickerNavbarItem-active &
            fill: base.$fg-3

.ReactionPickerNavbarItem-active
    border-bottom-color: var(--NihilityTheme0)

// Footer skintone's arrow
.IconMenuInput-container
    &-gray, &-white,
        .IconMenuInput-chevron-down, .IconMenuInput-selected-value-icon
            fill: base.$fg-1

/*
 * --- Misc menus ---
 */

// Server search wrapper
.MinimalNavSearchBar-search-results
    opacity: base.$floating-opacity
.GlobalSearchResult
    // Server search
    &s
        &-container
            background-color: base.$bg-2
        // Public servers header
        &-header
            color: base.$fg-1
    // Server search item
    &-container-desktop
        // Server search item focused
        &.GlobalSearchResult-container-focused
            background-color: base.$bg-3
        // Hovered over
        &::after
            background-color: base.$bg-hover